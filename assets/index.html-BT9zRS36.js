import{_ as n,c as a,d as l,o as i}from"./app-B50BTcOQ.js";const p={};function e(c,s){return i(),a("div",null,s[0]||(s[0]=[l(`<p>在 JavaScript 中，async/await 是处理异步操作的强大工具，但它经常让人困惑：它到底是同步还是异步？本文将通过直观的示例来澄清这个概念，深入解析其特性。</p><h2 id="核心结论" tabindex="-1"><a class="header-anchor" href="#核心结论"><span>核心结论</span></a></h2><p><strong>async/await 本质上是异步的，但提供了同步风格的代码结构</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>// async/await 的异步本质</span></span>
<span class="line"><span></span></span>
<span class="line"><span>async function fetchData() {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>console.log(&quot;开始获取数据...&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 模拟异步操作</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const data = await new Promise(resolve =&gt;&amp;#x20;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  setTimeout(() =&gt; resolve(&quot;数据已加载!&quot;), 2000)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>console.log(data);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>return data;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>console.log(&quot;调用前&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>fetchData().then(() =&gt; console.log(&quot;调用完成&quot;));</span></span>
<span class="line"><span></span></span>
<span class="line"><span>console.log(&quot;调用后&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 输出顺序:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 调用前</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 开始获取数据...</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 调用后</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// (2秒后)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 数据已加载!</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 调用完成</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="关键特性解析" tabindex="-1"><a class="header-anchor" href="#关键特性解析"><span>关键特性解析</span></a></h2><h3 id="_1-异步本质" tabindex="-1"><a class="header-anchor" href="#_1-异步本质"><span>1. 异步本质</span></a></h3><ul><li><p><strong>非阻塞执行</strong>：当遇到 await 时，函数会 &quot;暂停&quot; 执行，但不会阻塞主线程，主线程可以继续处理其他任务。</p></li><li><p><strong>微任务队列</strong>：await 后面的代码会被放入微任务队列，在同步代码执行完后运行。</p></li><li><p><strong>返回 Promise</strong>：async 函数总是返回 Promise 对象，无论函数体内是否有 return 语句，返回值都会被包装成 Promise 的 resolved 值。</p></li></ul><h3 id="_2-同步风格" tabindex="-1"><a class="header-anchor" href="#_2-同步风格"><span>2. 同步风格</span></a></h3><ul><li><p><strong>顺序书写</strong>：可以用同步的方式写异步代码，代码执行顺序与书写顺序一致，避免了回调函数的嵌套结构。</p></li><li><p><strong>错误处理</strong>：可以使用 try/catch 代替 .catch () 来处理异步操作中的错误，与同步代码的错误处理方式一致。</p></li><li><p><strong>代码可读性</strong>：逻辑更清晰，执行顺序更直观，尤其是在处理多个连续的异步操作时，优势更为明显。</p></li></ul><h2 id="可视化演示" tabindex="-1"><a class="header-anchor" href="#可视化演示"><span>可视化演示</span></a></h2><p><a href="/demo.html" rel="external">直接访问演示页面</a></p><p>下面是一个交互式示例，展示 async/await 的执行流程：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>\\&lt;!DOCTYPE html&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\\&lt;html lang=&quot;zh-CN&quot;&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\\&lt;head&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  \\&lt;meta charset=&quot;UTF-8&quot;&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  \\&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  \\&lt;title&gt;async/await 同步异步演示\\&lt;/title&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  \\&lt;style&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      body {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          font-family: &#39;Segoe UI&#39;, Tahoma, Geneva, Verdana, sans-serif;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          max-width: 800px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          margin: 0 auto;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          padding: 20px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          background: #f5f7fa;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          color: #333;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      h1 {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          color: #2c3e50;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          text-align: center;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          border-bottom: 2px solid #3498db;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          padding-bottom: 10px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      .container {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          display: flex;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          flex-direction: column;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          gap: 20px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      .explanation {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          background: white;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          border-radius: 8px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          padding: 20px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          box-shadow: 0 2px 10px rgba(0,0,0,0.1);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      .demo-area {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          display: flex;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          flex-direction: column;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          gap: 15px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      .code-block {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          background: #2d3436;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          color: #dfe6e9;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          padding: 15px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          border-radius: 6px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          font-family: &#39;Courier New&#39;, monospace;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          white-space: pre-wrap;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          line-height: 1.5;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      .console {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          background: #1e272e;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          color: #05c46b;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          padding: 15px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          border-radius: 6px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          min-height: 150px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          font-family: &#39;Courier New&#39;, monospace;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          overflow-y: auto;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          max-height: 300px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      .console-line {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          margin: 5px 0;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      .controls {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          display: flex;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          gap: 10px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          justify-content: center;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      button {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          background: #3498db;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          color: white;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          border: none;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          padding: 10px 20px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          border-radius: 4px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          cursor: pointer;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          font-size: 16px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          transition: background 0.3s;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      button:hover {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          background: #2980b9;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      .highlight {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          background: #f1c40f;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          color: #2c3e50;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          padding: 2px 4px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          border-radius: 3px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          font-weight: bold;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      .key-points {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          display: grid;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          gap: 15px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          margin-top: 20px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      .point-card {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          background: white;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          padding: 15px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          border-radius: 8px;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          box-shadow: 0 2px 5px rgba(0,0,0,0.1);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      .point-card h3 {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          color: #3498db;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          margin-top: 0;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  \\&lt;/style&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\\&lt;/head&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\\&lt;body&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  \\&lt;div class=&quot;container&quot;&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      \\&lt;h1&gt;async/await 同步与异步特性\\&lt;/h1&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>     &amp;#x20;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      \\&lt;div class=&quot;explanation&quot;&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          \\&lt;p&gt;\\&lt;span class=&quot;highlight&quot;&gt;async/await\\&lt;/span&gt; 允许我们以同步的方式编写异步代码，但其本质仍然是异步的：\\&lt;/p&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          \\&lt;ul&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              \\&lt;li&gt;遇到 \\&lt;span class=&quot;highlight&quot;&gt;await\\&lt;/span&gt; 时，函数会暂停执行\\&lt;/li&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              \\&lt;li&gt;控制权返回给调用者\\&lt;/li&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              \\&lt;li&gt;等待的 Promise 解决后，函数从暂停处恢复执行\\&lt;/li&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              \\&lt;li&gt;整个过程不会阻塞主线程\\&lt;/li&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          \\&lt;/ul&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      \\&lt;/div&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>     &amp;#x20;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      \\&lt;div class=&quot;demo-area&quot;&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          \\&lt;h2&gt;执行演示\\&lt;/h2&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          \\&lt;div class=&quot;code-block&quot;&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>async function demoAsync() {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  console.log(&quot;\\[1] async函数开始&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span> &amp;#x20;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  console.log(&quot;\\[2] 等待前...&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  const result = await new Promise(resolve =&gt; {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      setTimeout(() =&gt; {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          console.log(&quot;\\[4] Promise解决&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          resolve(&quot;完成!&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      }, 2000);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  });</span></span>
<span class="line"><span></span></span>
<span class="line"><span> &amp;#x20;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  console.log(\\\`\\[5] 获取结果: \\\${result}\\\`);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  return result;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>console.log(&quot;\\[A] 调用前&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>demoAsync().then(res =&gt; console.log(\\\`\\[6] then回调: \\\${res}\\\`));</span></span>
<span class="line"><span></span></span>
<span class="line"><span>console.log(&quot;\\[B] 调用后&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          \\&lt;/div&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>         &amp;#x20;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          \\&lt;div class=&quot;controls&quot;&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              \\&lt;button id=&quot;runBtn&quot;&gt;运行代码\\&lt;/button&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              \\&lt;button id=&quot;resetBtn&quot;&gt;重置\\&lt;/button&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          \\&lt;/div&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>         &amp;#x20;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          \\&lt;div class=&quot;console&quot; id=&quot;consoleOutput&quot;&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              \\&lt;!-- 输出将显示在这里 --&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          \\&lt;/div&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      \\&lt;/div&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>     &amp;#x20;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      \\&lt;div class=&quot;key-points&quot;&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          \\&lt;div class=&quot;point-card&quot;&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              \\&lt;h3&gt;同步特性\\&lt;/h3&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              \\&lt;ul&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                  \\&lt;li&gt;代码按顺序书写\\&lt;/li&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                  \\&lt;li&gt;可使用 try/catch 处理错误\\&lt;/li&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                  \\&lt;li&gt;避免回调地狱\\&lt;/li&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                  \\&lt;li&gt;逻辑更清晰\\&lt;/li&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              \\&lt;/ul&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          \\&lt;/div&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          \\&lt;div class=&quot;point-card&quot;&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              \\&lt;h3&gt;异步本质\\&lt;/h3&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              \\&lt;ul&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                  \\&lt;li&gt;返回 Promise 对象\\&lt;/li&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                  \\&lt;li&gt;不阻塞主线程\\&lt;/li&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                  \\&lt;li&gt;await 暂停但不阻塞\\&lt;/li&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                  \\&lt;li&gt;后续代码放入微任务队列\\&lt;/li&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              \\&lt;/ul&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          \\&lt;/div&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      \\&lt;/div&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  \\&lt;/div&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  \\&lt;script&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      const consoleOutput = document.getElementById(&#39;consoleOutput&#39;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      const runBtn = document.getElementById(&#39;runBtn&#39;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      const resetBtn = document.getElementById(&#39;resetBtn&#39;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>     &amp;#x20;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      function logToConsole(message) {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          const line = document.createElement(&#39;div&#39;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          line.className = &#39;console-line&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          line.textContent = message;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          consoleOutput.appendChild(line);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          consoleOutput.scrollTop = consoleOutput.scrollHeight;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>     &amp;#x20;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      async function demoAsync() {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          logToConsole(&quot;\\[1] async函数开始&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>         &amp;#x20;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          logToConsole(&quot;\\[2] 等待前...&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          const result = await new Promise(resolve =&gt; {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              setTimeout(() =&gt; {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                  logToConsole(&quot;\\[4] Promise解决&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                  resolve(&quot;完成!&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>              }, 2000);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          });</span></span>
<span class="line"><span></span></span>
<span class="line"><span>         &amp;#x20;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          logToConsole(\\\`\\[5] 获取结果: \\\${result}\\\`);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          return result;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>     &amp;#x20;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      runBtn.addEventListener(&#39;click&#39;, () =&gt; {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          consoleOutput.innerHTML = &#39;&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>         &amp;#x20;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          logToConsole(&quot;\\[A] 调用前&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          demoAsync().then(res =&gt; logToConsole(\\\`\\[6] then回调: \\\${res}\\\`));</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          logToConsole(&quot;\\[B] 调用后&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      });</span></span>
<span class="line"><span></span></span>
<span class="line"><span>     &amp;#x20;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      resetBtn.addEventListener(&#39;click&#39;, () =&gt; {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>          consoleOutput.innerHTML = &#39;&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      });</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  \\&lt;/script&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\\&lt;/body&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\\&lt;/html&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="执行流程说明" tabindex="-1"><a class="header-anchor" href="#执行流程说明"><span>执行流程说明</span></a></h2><ol><li><p><strong>同步代码执行</strong>：调用 async 函数前的同步代码立即执行。</p></li><li><p><strong>进入 async 函数</strong>：执行函数内 await 之前的代码。</p></li><li><p><strong>遇到 await</strong>：函数暂停执行，返回一个 Promise 给调用者。</p></li><li><p><strong>执行后续同步代码</strong>：主线程继续执行 async 函数调用后的代码。</p></li><li><p><strong>事件循环</strong>：当 Promise 解决后，JavaScript 事件循环将恢复 async 函数的执行。</p></li><li><p><strong>微任务处理</strong>：await 后面的代码作为微任务执行，确保在同步代码和宏任务之后运行。</p></li></ol><h2 id="何时使用-async-await" tabindex="-1"><a class="header-anchor" href="#何时使用-async-await"><span>何时使用 async/await</span></a></h2><ul><li><p>需要顺序执行多个异步操作时</p></li><li><p>处理复杂的异步逻辑链</p></li><li><p>需要简化 Promise 链式调用时</p></li><li><p>需要同步风格错误处理（try/catch）时</p></li></ul><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><p>async/await 是 JavaScript 异步编程的革命性特性：</p><ul><li><p><strong>表面同步</strong>：提供类似同步代码的书写方式，提高可读性</p></li><li><p><strong>本质异步</strong>：底层基于 Promise 和事件循环，保持非阻塞特性</p></li><li><p><strong>执行流程</strong>：遇到 await 暂停函数执行但不阻塞主线程</p></li><li><p><strong>最佳实践</strong>：用于简化异步代码，但需理解其底层机制</p></li></ul><p>通过上面的可视化示例，你可以清晰看到代码的实际执行顺序，理解 async/await 如何在不阻塞主线程的情况下实现类似同步的执行流程。</p>`,21)]))}const v=n(p,[["render",e]]),r=JSON.parse('{"path":"/js/y977zjyf/","title":"async await 的同步与异步特性解析","lang":"zh-CN","frontmatter":{"title":"async await 的同步与异步特性解析","createTime":"2025/07/24 09:32:59","permalink":"/js/y977zjyf/"},"readingTime":{"minutes":5.07,"words":1520},"git":{"createdTime":1753323973000,"updatedTime":1753323973000,"contributors":[{"name":"smileBoys2023","username":"smileBoys2023","email":"140247874+smileBoys2023@users.noreply.github.com","commits":1,"avatar":"https://avatars.githubusercontent.com/smileBoys2023?v=4","url":"https://github.com/smileBoys2023"}]},"filePathRelative":"notes/js/async_await 的同步与异步特性解析.md","headers":[]}');export{v as comp,r as data};
