---
title: 什么是递归
createTime: 2025/07/24 09:09:29
permalink: /js/pk3omwda/
---
# 递归：一种编程技巧

递归是一种编程技巧，函数直接或间接调用自身来解决问题。它的核心思想是将一个大问题分解成结构相同但规模更小的子问题，直到子问题足够简单可以直接求解（称为 “基准条件”），然后逐层返回结果组合成最终答案。

## 递归的核心要素

### 基准条件 (Base Case)

递归的终止条件。没有它，递归会无限循环导致栈溢出。

例如：计算阶乘 n! 时，定义 0! = 1 作为基准。

### 递归步骤 (Recursive Step)

将问题分解为更小的同类子问题，并调用自身解决。

例如：n! = n \* (n-1)!

## 递归能做什么？典型应用场景

### 数学计算



*   阶乘：fact (n) = n \* fact (n-1)

*   斐波那契数列：fib (n) = fib (n-1) + fib (n-2)

*   汉诺塔问题：通过递归移动圆盘

### 遍历树形结构



*   文件系统遍历：列出文件夹及其子文件夹中的所有文件。

*   DOM 树操作：递归访问网页中的嵌套节点。

*   二叉树遍历：前序、中序、后序遍历（递归比循环更简洁）。



```
\# 遍历文件夹的伪代码

def list\_files(directory):

   for item in directory:

       if item is a file:

           print(item)

       else:

           list\_files(item)  # 递归进入子文件夹
```

### 分治算法 (Divide and Conquer)



*   归并排序：将数组拆分成两半分别排序，再合并结果。

*   快速排序：选取基准值，递归排序子数组。

### 解决组合问题



*   生成全排列：如生成字符串的所有排列组合。

*   解决迷宫问题：递归尝试所有路径。

### 解析嵌套结构



*   JSON/XML 解析：处理嵌套的数据结构。

*   表达式求值：如计算 (1 + (2 \* 3)) 这类嵌套表达式。

## 递归 vs. 循环



| 特性    | 递归               | 循环        |
| ----- | ---------------- | --------- |
| 代码简洁性 | 更简洁（适合问题天然递归的场景） | 可能需复杂状态管理 |
| 性能    | 函数调用开销大，可能栈溢出    | 通常更高效     |
| 可读性   | 更贴近数学定义          | 直观但有时繁琐   |
| 适用问题  | 树、图、分治、嵌套结构      | 线性迭代任务    |

⚠️ 注意：递归深度过大可能导致栈溢出（如 Python 默认递归深度约 1000 层）。可通过尾递归优化（部分语言支持）或改用循环 + 栈解决。

## 一个简单例子：计算阶乘



```
def factorial(n):

   if n == 0:  # 基准条件

       return 1

   else:       # 递归步骤

       return n \* factorial(n-1)

print(factorial(5))  # 输出 120
```

## 何时使用递归？



*   问题可分解为多个相同结构的子问题。

*   子问题的规模不断缩小。

*   存在明确的基准条件。

*   代码简洁性比极致性能更重要（或问题规模可控）。

递归是理解算法思想的利器，但在生产环境中需谨慎评估性能和栈深度限制！

